(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(64)},38:function(e,t,a){},39:function(e,t,a){},57:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(30),s=a.n(i),o=(a(38),a(2)),c=a(3),l=a(5),m=a(4),u=a(6),p=a(17),h=a(11),d=(a(39),a(13)),f=a.n(d),b=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Text Box ",this.props.index+1),r.a.createElement("textarea",{onChange:function(t){return e.props.handleMemeText(e.props.index,t.target.value)}}))}}]),t}(r.a.Component),v=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("img",{className:"template-button",src:this.props.meme.url,alt:"meme thumbnail",onClick:this.props.reselectMeme,onMouseLeave:this.props.resetText,onMouseOver:this.props.changeText})}}]),t}(r.a.Component),g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).canvasRef=r.a.createRef(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"drawImage",value:function(){var e=this.canvasRef.current,t=e.getContext("2d");if(this.props.imgObj){var a=new Image;a.onload=function(){t.drawImage(a,0,0,a.width,a.height,0,0,e.width,e.height)},a.src=this.props.imgObj.url}}},{key:"componentDidMount",value:function(){this.drawImage()}},{key:"componentDidUpdate",value:function(){this.drawImage()}},{key:"render",value:function(){var e,t;return this.props.imgObj?(e=500,t=this.props.imgObj.height/(this.props.imgObj.width/500)):(e=0,t=0),r.a.createElement("div",null,r.a.createElement("canvas",{width:e,height:t,ref:this.canvasRef}))}}]),t}(r.a.Component);a(57);var y=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).handleInput=function(t){e.setState(function(){return{searchTerm:t}})},e.checkMatch=function(t){var a=new RegExp(e.state.searchTerm,"gi");return""===e.state.searchTerm||null!=t.name.match(a)},e.uploadMeme=function(t){t.preventDefault();var a={template_id:e.props.currentMeme.id,photoURL:e.props.currentMeme.url,memeTexts:e.props.memeText,user:"Who"};console.log(e.props.memeText),f.a.post("/upload",a).then(function(e){200===e.status&&(window.location.href="/gallery")}).catch(function(e){console.log(e)})},e.createTextBoxes=function(){var t=[];if(null!=e.props.currentMeme)for(var a=0;a<e.props.currentMeme.box_count;a++)t.push(r.a.createElement(b,{id:"box1",index:a,handleMemeText:e.props.handleMemeText}));return t},e.state={searchTerm:""},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.memeArray?this.props.currentMeme:null;return r.a.createElement("div",{className:"meme-gen"},r.a.createElement("h2",{className:"title"},"Meme Generator"),r.a.createElement("div",{className:"left-col"},r.a.createElement("div",{className:"img-preview"},r.a.createElement(g,{imgObj:t}))),r.a.createElement("div",{className:"right-col"},r.a.createElement("div",{className:"textboxes"},this.createTextBoxes()),r.a.createElement("div",{className:"template-search"},r.a.createElement("div",{className:"buttons-section"},r.a.createElement("button",{type:"submit",onClick:this.uploadMeme}," Submit Meme "),r.a.createElement("button",{type:"submit",onClick:this.props.downloadMeme},"Download Meme")),r.a.createElement("input",{id:"search",type:"text",onChange:function(t){return e.handleInput(t.target.value)}}),r.a.createElement("div",{id:"catalogue"},r.a.createElement("p",{style:{fontWeight:this.props.isBold?"bold":"normal"}},this.props.displayName),r.a.createElement("div",{id:"meme-templates"},this.props.memeArray&&this.props.memeArray.filter(this.checkMatch).map(function(t){return r.a.createElement(v,{key:t.id,meme:t,reselectMeme:function(){return e.props.reselectMeme(t)},changeText:function(){return e.props.changeText(t)},resetText:e.props.resetText})}))))))}}]),t}(r.a.Component),x=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).reselectMeme=function(t){e.setState(function(e){return{currentMeme:t,isBold:!0,memeText:e.memeText.slice(0,t.box_count)}})},e.changeText=function(t){e.setState(function(e,a){return{displayName:t.name,isBold:t===e.currentMeme}})},e.resetText=function(){e.setState(function(e,t){return{displayName:e.currentMeme.name,isBold:!0}})},e.handleMemeText=function(t,a){var n=e.state.memeText;n[t]=a,e.setState(function(e){return{memeText:n}})},e.state={memeArray:null,currentMeme:null,displayName:"Loading...",isBold:!1,memeText:[]},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;f.a.get("https://api.imgflip.com/get_memes").then(function(t){if(t.data.success){var a=t.data.data.memes;e.setState(function(e){return{memeArray:a,currentMeme:a[0],displayName:a[0].name,isBold:!0,memeText:new Array(a[0].box_count)}})}})}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(y,Object.assign({},t,{memeArray:e.state.memeArray,currentMeme:e.state.currentMeme,displayName:e.state.memeArray?e.state.displayName:"Loading...",reselectMeme:e.reselectMeme,changeText:e.changeText,resetText:e.resetText,isBold:e.state.isBold,handleMemeText:e.handleMemeText,memeText:e.state.memeText,downloadMeme:e.downloadMeme}))}})}}]),t}(r.a.Component),O=a(15),j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={likes:a.props.likes,isBolded:a.props.isBolded},a.handleLike=a.handleLike.bind(Object(O.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleLike",value:function(e){var t=this;e.preventDefault();var a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:this.props.id,likes:this.state.likes,isBolded:this.state.isBolded})};fetch("/likememe",a).then(function(e){return e.json()}).then(function(e){console.log(e),t.setState(e)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.state.isBolded?"likedButton":"unlikedButton";return r.a.createElement("form",{onSubmit:this.handleLike},r.a.createElement("button",{className:e,type:"Submit"},r.a.createElement("span",{role:"img","aria-label":"like"},"\ud83d\udc4d "),this.state.likes))}}]),t}(r.a.Component),E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={id:a.props.id,photoURL:a.props.photoURL,topText:a.props.topText,bottomText:a.props.bottomText,user:a.props.user},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"memeModel"},r.a.createElement("div",{className:"memeImageOutline"},r.a.createElement("img",{className:"memeImage",src:this.state.photoURL,alt:this.state.photoURL}),r.a.createElement("h2",null," ",this.props.topText," "),r.a.createElement("h2",null," ",this.props.bottomText," ")),r.a.createElement("div",{className:"controls"},r.a.createElement("h4",null," by ",this.props.user," "),r.a.createElement(j,{likes:this.props.likes,isBolded:this.props.isBolded,id:this.state.id})))}}]),t}(r.a.Component);a(63);var k=function(e){function t(){var e;return Object(o.a)(this,t),e=Object(l.a)(this,Object(m.a)(t).call(this)),f.a.get("/getmemes").then(function(t){e.setState({memeArray:t.data})}),e.state={memeArray:null},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){console.log(this.state.memeArray);var e=this.state.memeArray?this.state.memeArray.map(function(e){return r.a.createElement(E,{key:e._id,id:e._id,photoURL:e.photoURL,topText:e.topText,bottomText:e.bottomText,user:e.user,likes:e.likes,isBolded:e.isBolded})}):null;return r.a.createElement("div",null,r.a.createElement("h2",{className:"title"},"Meme Gallery"),e)}}]),t}(r.a.Component),T=function(e){var t;return""===e.page?t=r.a.createElement("div",{id:"links-section"},r.a.createElement("a",{className:"link selected",id:"acm-generator",href:"/"},"Generator"),r.a.createElement("a",{className:"link",id:"acm-gallery",href:"/gallery"},"Gallery")):"gallery"===e.page&&(t=r.a.createElement("div",{id:"links-section"},r.a.createElement("a",{className:"link",id:"acm-generator",href:"/"},"Generator"),r.a.createElement("a",{className:"link selected",id:"acm-gallery",href:"/gallery"},"Gallery"))),r.a.createElement("section",{id:"nav-bar"},r.a.createElement("h1",{id:"acm"}," ACM UCSD Meme Gen "),t)},M=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=String(window.location).split("/")[3];return r.a.createElement(p.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(T,{page:e}),r.a.createElement(x,null),r.a.createElement(h.a,{path:"/gallery",render:function(e){return r.a.createElement(k,e)}})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.fddf9a34.chunk.js.map